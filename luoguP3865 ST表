/* luoguP3865 */
/** ST表 **/
/**
 *长度为n的数列，m次询问，每次询问给出区间[l,r]输出区间最大值
 *1<=n<=1e5，1<=m<=2e6，数列中数小于1e9
 **/
#include<cstdio>
#include<algorithm>
#include<cmath>
using namespace std;
const int N=1e5+5;
int n,m;
int st[N][20];
//20是因为区间长度最长1e5，log2(1e5)<20
template<class T>
void read(T& x){
    x=0;
    int f=1;
    char ch=getchar();
    while(ch<'0'||ch>'9'){
        if(ch=='-') f=-1;
        ch=getchar();
    }
    while(ch>='0'&&ch<='9'){
        x=x*10+ch-'0';
        ch=getchar();
    }
    x*=f;
}
void init()
{
    for(int j=1;j<20;j++)
        for(int i=1;i+(1<<j)-1<=n;i++)//[i,i+2^j)区间，控制边界不超过n
            st[i][j]=max(st[i][j-1],st[i+(1<<(j-1))][j-1]);
}
int RMQ(int l,int r)
{
    int k=log2(r-l+1);
    return max(st[l][k],st[r-(1<<k)+1][k]);
}

int main()
{
    read(n),read(m);
    for(int i=1;i<=n;i++)
        read(st[i][0]);
    init();
    int l,r;
    for(int i=0;i<m;i++)
    {
        read(l),read(r);
        printf("%d\n",RMQ(l,r));
    }
    return 0;
}
